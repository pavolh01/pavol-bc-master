

<div class="row">
  <div class="col-xs-12">
    <form class="example-form">
      <app-header></app-header>
      <div class="row">
        <p>{{this.TaskCount}}</p>
      </div>
      
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Title</mat-label>
        <input
          matInput
          type="text"
          placeholder="Title"
          [(ngModel)]="note.title"
          [ngModelOptions]="{ standalone: true }"
        />
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Body</mat-label>
        <input
          matInput
          type="text"
          placeholder="Body"
          [(ngModel)]="note.body"
          [ngModelOptions]="{ standalone: true }"
        />
      </mat-form-field>

      <!-- nejde pridávať farby do databázy -->
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Chooose Color</mat-label>
        <mat-select [(ngModel)]="note.color" name="color">
          <mat-select-trigger>
            <span
              class="color-span"
              [ngStyle]="{ 'background-color': note.color }"
            ></span>
          </mat-select-trigger>
          <mat-option *ngFor="let color of colors" [value]="'#' + color.value">
            <span
              class="color-span"
              [ngStyle]="{ 'background-color': '#' + color.value }"
            ></span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Choose a date</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          [ngModel]="date"
          name="date"
          (ngModelChange)="assignValue($event)"
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <button
        mat-raised-button
        class="post-button"
        color="primary"
        (click)="onAddNoteClick()"
        (click)="startTimer()"
      >
        Add note
      </button>
    </form>
  </div>
  <div class="progressbar" [hidden]="isNotePosted">
    <mat-progress-bar
      class="progressbar"
      mode="determinate"
      [value]="progressbarValue"
    ></mat-progress-bar>
  </div>

  <div class="upload">
    <input
      id="upload"
      type="file"
      (change)="onSelectFile($event)"
      [accept]="allowedFormats"
    />
    <label>Choose file</label>
  </div>
  <br />

  <div class="cards">
    <mat-card class="example-card" *ngFor="let note of notes">
      <!-- <mat-card-title ng-if="!note.data.title"  [hidden]="noteIsEmpty"> Note is empty</mat-card-title> -->
      <mat-card-title>{{ note.data.title }}</mat-card-title>
      <mat-card-content>
        <h6>{{ note.data.body }}</h6>
        <p>{{ note.data.date }}</p>
        <!-- <p> {{ note.uid }}</p> -->
        <p>{{ note.data.color }}</p>
        <p>{{ note.data.file_id }}</p>
        <p>{{ note.data.file_id }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-mini-fab color="primary" (click)="onEditClick(note)">
          <mat-icon> border_color</mat-icon>
        </button>

        <div style="position: absolute; right: 5px; bottom: 5px">
          <button mat-mini-fab color="warn" (click)="onDeleteClick(note)">
            <mat-icon>close</mat-icon>
          </button>
        </div>

        <div class="complete" style="position: absolute; left: 308px; top: 1px">
          <button mat-mini-fab color="primary" (click)="onCompleteClick(note)">
            <mat-icon>check</mat-icon>
          </button>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
